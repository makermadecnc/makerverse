#!/bin/bash
. "$(dirname "$0")/_/husky.sh"

yarn run lint-staged

# Check if this project is embedded within MakerHub. If so, ensure that it's using the right production config.
PKG="../../package.json"
if grep -q "\"productName\": \"MakerHub\"" "$PKG"; then
  pushd "../../"
  maker-env sync Makerverse
  popd
else
  echo "$PKG was not MakerHub root; skipping sync."
fi

sed -i -e "s#https://npm.oodalolly.camp#https://registry.yarnpkg.com#g" WebApp/yarn.lock
